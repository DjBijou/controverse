<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Faut-il supprimer les voitures des villes ?</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
	<link href="/css/doc.min.css" rel="stylesheet"/>
	<link rel="stylesheet" href="css/contro.css">

	<meta name="author" content="Adrien BOCQUET"/>
	<meta name="author" content="Gaël BLAISE"/>
	<meta name="author" content="Morgane GOULAIN"/>
	<meta name="author" content="Ines HARANG"/>
	<meta name="author" content="Pierre WAN-FAT"/>
</head>
<body>

<div class="container-fluid">

	<div id="sidebar_toggle" class="col-12 col-md-3 col-xl-2 mt-3">
		<button class="btn btn-primary btn-block btn-outline-secondary">Menu</button>
	</div>
	<div id="sidebar" class="col-12 col-xl-2 bd-sidebar">
		<div class="row flex-xl-nowrap hidden">
			<nav class="collapse show bd-links" id="bd-docs-nav">
				{% for article in articles %}
					{% if article.isHead %}
						{% if not loop.first %}
								</ul>
							</div>
						{% endif %}

						<div class="bd-toc-item active">
							<a class="bd-toc-link" href="#{{ article.id }}">{{ article.name }}</a>
							<ul class="nav bd-sidenav">
					{% else %}
						<li><a href="#{{ article.id }}">{{ article.name }}</a></li>
					{% endif %}

					{% if article.menuSep %}
						<li><br></li>
					{% endif %}
				{% endfor %}
								</ul>
							</div>

			</nav>
		</div>
		</nav>
	</div>
	</div>
	<div class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" id="content">

		{% for article in articles %}
			{% if not loop.first and article.isHead %}
					</div>
				</section>
			{% endif %}

			{% if loop.first or article.isHead %}
			<section class="section {% if article.color is not null %}color_{{ article.color | trim("#") }}"{% endif %}>

				<style>
					.color_{{ article.color | trim("#") }} h1, .color_{{ article.color | trim("#") }} h2 {
						color: {{ article.color }};
					}
				</style>

				<div class="container">
					{% endif %}

					<article class="p-4 mb-3 mt-2">
						{{ render(article) }}
					</article>

					{% endfor %}

				</div>
			</section>

	</div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
<script>

	var maxSelected = $("section.section").length - 1;
	var selected = 0 ;
	var id = location.hash;

	$('section.section').each(function(index){
		if($(this).find(id).length > 0){
			selected = index ;
			return false ;
		}
	});

	function refresh(){
		$('section').each(function(index){
			$(this).animate({
				"left": ((index - selected) * 100) + "%"
			}, 1000);

			if (index == selected){
				$(this).focus();

				$(document.body).animate({
					backgroundColor: $(this).find("[data-background]").attr("data-background")
				}, 1000);

			}
		});
	}



	$('section.section').each(function(index){
		$(this).css("left", ((index - selected) * 100) + "%")

		if (index == selected){
			$(document.body).animate({
				backgroundColor: $(this).find("[data-background]").attr("data-background")
			}, 1000);
		}
	}).first().focus();

	$(window).on('hashchange', function(e){
		var id = location.hash;

		$('section.section').each(function(index){
			if($(this).find(id).length > 0){
				selected = index ;
				return false ;
			}
		});

		refresh();
	});

	$(document).keydown(function(e) {
		switch(e.which) {
			case 37: // left
				if(selected > 0)
				selected-- ;
				break;
			case 39: // right
				if(selected < maxSelected)
				selected++ ;
				break;
			default: return; // exit this handler for other keys
		}
		refresh();
		e.preventDefault(); // prevent the default action (scroll / move caret)
	});

	$('#sidebar_toggle').click(function(){
		$('#sidebar').toggle("slide");
	});

	$('#sidebar').toggle();

	$('#sidebar a').click(function(){
		$('#sidebar').toggle("slide");
	})

	$('.fade').delay(2000).fadeOut(400)
</script>

<script>
	function msieversion()
	{
		var ua = window.navigator.userAgent;
		var msie = ua.indexOf("MSIE ");
		return msie > 0; // If Internet Explorer, return true
	}

	if(msieversion()){
		$('.section').removeClass('section');
		$('section').first().append("<div class=\"alert alert-danger show mt-3\" role=\"alert\"> Vous utilisez IE6, nous vous conseillons d'utiliser un navigateur récent pour plus de confort de navigation\n</div>");
	}

	</script>

</body>
</html>